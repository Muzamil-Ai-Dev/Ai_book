# Phase 0: Research & Discovery

## Decision 1: Root URL Configuration
**Context**: The spec requires the Intro page to be the site root (`/`).
**Options**:
1.  **Docs-only Mode**: Set `routeBasePath: '/'` in `docusaurus.config.ts`.
    *   *Pros*: Cleanest URL structure (`/intro` instead of `/modules/intro`), no landing page maintenance.
    *   *Cons*: Breaks existing `/modules/` links (though we can create redirects).
2.  **Client-side Redirect**: Keep `routeBasePath: 'modules'` and redirect `src/pages/index.tsx` to `/modules/intro`.
    *   *Pros*: Preserves existing URLs.
    *   *Cons*: Slower UX (flash of redirect), keeps `/modules/` prefix.

**Decision**: **Option 1 (Docs-only Mode)**.
**Rationale**: This aligns best with the "Textbook" nature of the site. The entire site IS the documentation. We will set `routeBasePath: '/'` and ensure `apps/web/modules/01-intro/index.md` has `slug: /` to be the homepage.
**Implication**: We must delete `src/pages/index.tsx` and `src/components/HomepageFeatures` to avoid conflicts.

## Decision 2: Auxiliary Pages Location
**Context**: Glossary and Notation pages must be standalone and linked from the Navbar, not the Sidebar.
**Options**:
1.  **Docs folder**: Put them in `apps/web/modules/` and hide from sidebar.
    *   *Pros*: Keeps content together.
    *   *Cons*: Messy config to hide from autogenerated sidebar.
2.  **Pages folder**: Put them in `apps/web/src/pages/`.
    *   *Pros*: Native Docusaurus behavior for standalone pages. Renders MDX. Not in doc sidebar.
    *   *Cons*: Separated from main content source.

**Decision**: **Option 2 (Pages folder)**.
**Rationale**: Simplest implementation. `src/pages/glossary.md` becomes `/glossary` automatically.

## Decision 3: Sidebar Structure
**Context**: "Intro → Modules → Chapters → Capstone" hierarchy.
**Current State**: `01-intro`, `02-ros2`, etc. are top-level folders.
**Analysis**:
*   Docusaurus autogenerated sidebar respects filesystem.
*   `01-intro` -> Intro (Module)
*   `02-ros2` -> ROS 2 (Module)
*   This creates a flat list of modules.
*   To strictly satisfy "Intro -> Modules -> Chapters", we might want:
    *   `01-intro`
    *   `modules` folder?
        *   `01-ros2`
        *   `02-simulation`
    *   `99-capstone`
*   However, the spec might just mean the *visual* hierarchy: You see Intro, then you see the list of Modules.
*   Renesting everything into a `modules` subfolder changes URLs significantly.
**Decision**: **Keep current flat structure** but ensure naming provides the visual grouping. The numbered prefixes (`01-`, `02-`) already provide the ordered list. We will rely on the natural ordering.

## Decision 4: Math Support
**Context**: Notation guide requires rendering.
**Status**: `remark-math` and `rehype-katex` are already installed and configured in `docusaurus.config.ts` and `package.json`.
**Action**: Verify CSS import in `docusaurus.config.ts` (Already present).

## Decision 5: Chapter Template Enforcement
**Context**: Strict section enforcement.
**Implementation**: We cannot enforce this at *build time* easily without a custom plugin or linter.
**Decision**: Implement a `validate-content.js` script update (or separate script) that parses MDX AST to check for required Level 2 headings.
